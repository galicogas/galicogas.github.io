{% assign city = site.data.service_areas[page.city_key] %}

{% include head.html %}
{% include header.html %}
{% include disclaimer-banner.html %}
{% include script.html %}

<!-- <img src="/assets/img/community/{{city.image}}" class="img-fluid" alt="{{city.name}}, Ontario"> -->

<!-- Page Header Start -->
<div
  class="container-fluid page-header py-5 mb-5 wow fadeIn"
  data-wow-delay="0.1s"
>
  <div class="container text-center py-5">
	<h1 class="display-4 text-white animated slideInDown mb-4">Hot Water System Installation in {{ city.name }}, Ontario</h1>
  </div>
</div>
<!-- Page Header End -->  

	<div class="container-xxl py-5" id="services">
      <div class="container">
        <div class="row g-5">
          <div class="col-lg-12 wow fadeInUp" data-wow-delay="0.1s">
            <div class="position-relative overflow-hidden ps-5 pt-5 h-100" style="min-height: 600px">
				<p>
				{{ city.description }}
				{% if city.chamber %}
					<p>
						Galico is a proud member of the {{ city.chamber }} community.
					</p>
				{% endif %}
				</p>


				
				
				<h3 class="text-center mb-4">We offer the following services to the homeowners of {{ city.name }}:</h3>
				
				{% for key in site.data.services %}
				{% if key[1].category == "Hot Water System" %}
					<a 
					  href="/hot-water/{{ key[1].slug }}" 
					  class="d-block text-decoration-none mb-4"
					>
					  <div class="border rounded p-4 hover-lift">
						<div class="d-flex align-items-center mb-3">
						  <div class="flex-shrink-0 me-4">
							<div style="width: 60px; height: 60px;">
							  <img 
								src="/assets/img/logo/favicon.png" 
								alt="Galico Heating" 
								class="img-fluid"
								style="width: 40px; height: 40px; object-fit: contain;"
							  >
							</div>
						  </div>
						  <div class="flex-grow-1">
							<h2 class="fw-bold mb-1">{{ key[1].name }}</h2>
							<p class="text-muted mb-0 lead">
							  {{ key[1].hero.h2 | default: 'Professional heating solutions for your home' }}
							</p>
						  </div>
						  <div class="flex-shrink-0 text-primary">
							<i class="fa fa-arrow-right fa-2x"></i>
						  </div>
						</div>
					  </div>
					</a>
				{% endif %}
				{% endfor %}
			</div>
		</div>
		</div>
		</div>
		</div>

		<!-- Subcription -->
		<section class="py-5 bg-white">
		<div class="container">
			<div class="row mb-5 wow fadeInUp" data-wow-delay="0.1s">
				<div class="col-12 text-center">
					<h3 class="section-title">Stuck in a Water Heater Rental Contract?</h3>
					<p class="section-subtitle">
						Learn more about our <a href="{{ '/onboarding' | relative_url }}" class="text-primary">Subscription Onboarding Program</a>.
					</p>
				</div>
			</div>
		</div>
		</section>
		<!-- Subscription End -->

		<!-- Services Start -->
		<div class="container-xxl py-5" id="products">
		  <div class="container">
			<div class="row g-5 align-items-end mb-5">
			  <div class="col-lg-6 wow fadeInUp" data-wow-delay="0.1s">
				<div class="border-start border-5 border-primary ps-4">
				  <h6 class="text-body text-uppercase mb-2">Trusted Professional</h6>
				  <h1 class="display-6 mb-0">
					Other Services
				  </h1>
				</div>
			  </div>
			</div>
			<div class="row g-4 justify-content-center">
			   {% assign content = site.data.other_categories[page.category_key] %}
					{% for key in site.data.other_categories %}
					  {% assign s = key[1] %}
					  {% assign row_position = forloop.index0 | modulo: 3 %}
					  {% assign delay = row_position | times: 0.2 %}
							  <div class="col-lg-4 col-md-6 wow fadeInUp" data-wow-delay="{{ delay }}s">
								<div class="service-item bg-light overflow-hidden h-100">
								  <img class="img-fluid" src="/assets/img/{{s.image}}" alt="{{s.name}}" />
								  <div class="service-text position-relative text-center h-100 p-4">
									<h2 class="mb-3">{{s.name}}</h2>
									<p>{{s.desc}}</p>
									<a href="{{ s.url }}" class="btn btn-primary py-3 px-5">{{s.cta}}</a>
								  </div>
								</div>
							  </div>
					{% endfor %}
			</div>
		  </div>
		</div>

<!-- Collect ALL testimonials filtered by city -->
<section class="py-5 bg-white">
				{% assign all_testimonials = site.data.testimonials | default: empty %}
				{% assign city_testimonials = all_testimonials | where: "location", city.name %}

				{% if city_testimonials.size > 0 %}

				  <div class="container py-5">
					<div class="row justify-content-center">
					  <div class="col-lg-8 col-md-10">
						<h3 class="text-center mb-4"><i>See what {{ city.name }} has to say...</h3>
						
						{% for testimonial in city_testimonials %}
						<div class="border rounded p-4 mb-4 shadow-sm">
						  <div class="d-flex align-items-center justify-content-center mb-3 flex-wrap">
							<div class="me-3" aria-label="{{ testimonial.rating }} out of 5 stars" role="img">
							  {% for i in (1..5) %}
								{% assign half_threshold = i | minus: 0.5 %}
								{% if testimonial.rating >= i %}
								  <i class="bi bi-star-fill text-warning" aria-hidden="true"></i>
								{% elsif testimonial.rating >= half_threshold %}
								  <i class="bi bi-star-half text-warning" aria-hidden="true"></i>
								{% else %}
								  <i class="bi bi-star text-warning" aria-hidden="true"></i>
								{% endif %}
							  {% endfor %}
							</div>
							<small class="text-muted"><b>{{ testimonial.name }}</b></small>
						  </div>
						  <p class="text-center mb-0 fst-italic">"{{ testimonial.text }}"</p>
						  
						  {% if testimonial.categories %}
						  <div class="text-center mt-2">
							{% for category in testimonial.categories limit: 3 %}
							  <span class="badge bg-light text-dark me-1">{{ category }}</span>
							{% endfor %}
						  </div>
						  {% endif %}
						</div>
						{% endfor %}
						
					  </div>
					</div>
				  </div>

				{% endif %}
</section>

{% include footer.html %}